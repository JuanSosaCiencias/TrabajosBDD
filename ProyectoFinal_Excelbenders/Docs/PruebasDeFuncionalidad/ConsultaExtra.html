<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8"/><style>
table {border: medium solid #6495ed;border-collapse: collapse;width: 100%;} th{font-family: monospace;border: thin solid #6495ed;padding: 5px;background-color: #D0E3FA;}th{text-align: left;}td{font-family: sans-serif;border: thin solid #6495ed;padding: 5px;text-align: center;}.odd{background:#e8edff;}img{padding:5px; border:solid; border-color: #dddddd #aaaaaa #aaaaaa #dddddd; border-width: 1px 2px 2px 1px; background-color:white;}</style>
</head>
<body>
<table><tr><th colspan="5"><pre><code>/* Consulta Extra:<br>*<br>* Esta consulta es para cumplir el requerimiento del Caso de Uso para saber el medallero <br>* de los Juegos Olímpicos. <br>*<br>* Esta consulta NO genera los 30 resultados.<br>*<br>* La consulta agrupa los resultados por el país (a.NombrePais), calculando la cantidad de <br>* medallas de cada tipo (oro, plata, bronce).<br>* Se ordena primero por el número de medallas de oro en orden descendente.<br>* En caso de empate, se usa el número de medallas de plata.<br>* Si aún hay empate, se considera el número de medallas de bronce.<br>*/<br>SELECT <br>    a.NombrePais AS Pais,<br>    COALESCE(SUM(CASE WHEN m.TipoMedalla = 'Oro' THEN 1 ELSE 0 END), 0) AS MedallasOro,<br>    COALESCE(SUM(CASE WHEN m.TipoMedalla = 'Plata' THEN 1 ELSE 0 END), 0) AS MedallasPlata,<br>    COALESCE(SUM(CASE WHEN m.TipoMedalla = 'Bronce' THEN 1 ELSE 0 END), 0) AS MedallasBronce,<br>    COALESCE(SUM(CASE WHEN m.TipoMedalla IN ('Oro', 'Plata', 'Bronce') THEN 1 ELSE 0 END), 0) AS TotalMedallas<br>FROM <br>    Atleta a<br>LEFT JOIN <br>    Medalla m ON a.IDAtleta = m.IDAtleta<br>GROUP BY <br>    a.NombrePais<br>ORDER BY <br>    MedallasOro DESC, <br>    MedallasPlata DESC, <br>    MedallasBronce DESC<br>LIMIT 1</code></pre></th></tr><tr><th>pais</th><th>medallasoro</th><th>medallasplata</th><th>medallasbronce</th><th>totalmedallas</th></tr><tr class="odd"><td>Omán</td><td>4</td><td>1</td><td>0</td><td>5</td></tr>
</table></body></html>